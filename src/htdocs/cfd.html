<!DOCTYPE html>
<html lang="en">

<head>
  <title>Kanban CFD</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <h1>Kanban CFD Chart</h1>

  <div id="chart" style="width: 100%; height: 90vh;">
    <canvas id="myChart" style="width:100%; height: 100%;"></canvas>
  </div>

<script>


var columnLabels = ['Date 2','Date 3','Date 4','Date 5','Date 6','Date 7','Date 8']
var dataRowLabels = ['Row 1', 'Row 2', 'Row Â´3', 'Row 4']
var inputData = [
  [1,2,3,4,5,6,7],
  [0,0,0,1,1,1,2],
  [0,0,0,4,3,2,1],
  [1,2,2,3,2,1,2],
];

const CHART_COLORS = [
  'rgb(255, 99, 132)',
  'rgb(255, 159, 64)',
  'rgb(255, 205, 86)',
  'rgb(75, 192, 192)',
  'rgb(54, 162, 235)',
  'rgb(153, 102, 255)',
  'rgb(201, 203, 207)'
];

function getChartDataForInput () {
  var result = [];
  var counter = 0;

  return inputData.map ( dataSet => {
    const result = {
      label: dataRowLabels[counter],
      data: dataSet,
      borderColor: CHART_COLORS[counter],
      backgroundColor: CHART_COLORS[counter],
      fill: true
    }
    counter ++;
    return result;
  });

}


var cfdChart;
window.onload = function () {
  const data = {
    labels: columnLabels,
    datasets: getChartDataForInput()
  };

  const config = {
    type: 'line',
    data: data,
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: (ctx) => 'Kanban CFD Chart'
        },
        tooltip: {
          mode: 'index'
        },
      },
      interaction: {
        mode: 'nearest',
        axis: 'x',
        intersect: false
      },
      scales: {
        x: {
          title: {
            display: true,
            text: 'Date'
          }
        },
        y: {
          stacked: true,
          title: {
            display: true,
            text: 'Number of Cards'
          }
        }
      }
    }
  };

  const ctx = document.getElementById('myChart').getContext('2d');
  cfdChart = new Chart(ctx, config);
}
</script>

</body>

</html>